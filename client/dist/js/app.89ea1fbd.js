(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],a[o]&&m.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/spoty-mix-vue/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"206d":function(t,e,n){"use strict";var i=n("9cbb"),a=n.n(i);a.a},"30db":function(t,e,n){"use strict";var i=n("a4c0"),a=n.n(i);a.a},3169:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("router-view")],1)},s=[],o={name:"app"},r=o,c=(n("5c0b"),n("2877")),l=Object(c["a"])(r,a,s,!1,null,null,null),u=l.exports,d=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("h1",{staticClass:"login__logo"},[n("font-awesome-icon",{staticClass:"login__logo__icon",attrs:{icon:"not-equal"}}),t._v("SpotyMix\n  ")],1),t._m(0),t._m(1),n("v-button",{attrs:{text:"Login with your Spotify",type:"buttonLink",href:"https://spotymix-auth-server.herokuapp.com/login",big:""}})],1)},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"login__slogan"},[t._v("\n    Your best\n    spotify\n    "),n("span",[t._v("mixer")]),t._v(" playlist\n  ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"login__description"},[t._v("\n    Access with your spotify user and "),n("span",{staticClass:"bold"},[t._v("mix your playlist")]),t._v(" easily, choose your two ore more\n    favorite lists and mix them in one click!\n  ")])}],h=(n("ac6a"),n("456d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return"buttonLink"===t.type?n("a",{staticClass:"c-button",class:[{"c-button--big ":t.big},{"c-button--disabled ":t.isDisabled},t.variantClass,t.extraClass],attrs:{href:t.href}},[t.icon?n("font-awesome-icon",{staticClass:"c-button__icon",attrs:{icon:t.icon}}):t._e(),t.text?n("span",{staticClass:"c-button__text"},[t._v(t._s(t.text))]):t._e()],1):n("button",{staticClass:"c-button",class:[{"c-button--big ":t.big},{"c-button--disabled ":t.isDisabled},t.variantClass,t.extraClass],on:{click:function(e){return e.preventDefault(),t.onButtonClick(e)}}},[t.icon?n("font-awesome-icon",{staticClass:"c-button__icon",attrs:{icon:t.icon}}):t._e(),t.text?n("span",{staticClass:"c-button__text"},[t._v(t._s(t.text))]):t._e()],1)}),p=[],_={name:"Button",props:{text:String,type:String,href:String,icon:String,extraClass:String,big:Boolean,disabled:Boolean,variant:String},data:function(){return{isDisabled:this.disabled}},methods:{onButtonClick:function(){this.$emit("onClick")},activeButton:function(){this.isDisabled=!1},disabledButton:function(){this.isDisabled=!0}},computed:{variantClass:function(){if("green"===this.variant)return"c-button--green"}}},v=_,g=(n("ef55"),Object(c["a"])(v,h,p,!1,null,null,null)),b=g.exports,y={name:"login",components:{"v-button":b},methods:{getHashParams:function(){var t,e={},n=/([^&;=]+)=?([^&;]*)/g,i=window.location.hash.substring(1);t=n.exec(i);while(t)e[t[1]]=decodeURIComponent(t[2]),t=n.exec(i);return e}},mounted:function(){Object.keys(this.getHashParams()).length&&this.$store.commit("addConfig",this.getHashParams())},beforeRouteEnter:function(t,e,n){n(function(t){null!==t.$store.state.config.access_token&&n({name:"dashboard"})})}},x=y,k=(n("206d"),Object(c["a"])(x,m,f,!1,null,null,null)),C=k.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"page-content"},[n("v-header"),t.loading?n("p",{staticClass:"page-content__loading"},[t._v("Loading...")]):t._e(),t.error?n("p",{},[t._v(t._s(t.error))]):t._e(),this.playlists?n("main",{staticClass:"page-content__main"},[n("div",{staticClass:"dashboard__header"},[n("h3",{staticClass:"dashboard__header__title"},[t._v("Select your playlists for the mix.")]),n("v-button",{ref:"mixButton",attrs:{text:"Mix",icon:"music",disabled:""},on:{onClick:t.goToMix}})],1),n("ul",{staticClass:"dashboard__list"},t._l(this.playlists,function(e,i){return n("list-card",{key:i,attrs:{title:e.name,poster:e.images[0].url,id:e.id},on:{openPreview:function(){return t.openModalPreview("modal-preview",e)}}})}),1)]):t._e(),t.modal.isOpen&&"modal-preview"===t.modal.name?n("Modal",{attrs:{title:this.prePlaylist.name},on:{close:t.closeModal}},[t.prePlaylist.tracks?n("ul",t._l(t.prePlaylist.tracks,function(t,e){return n("track-item",{key:e,attrs:{data:t.track}})}),1):t._e()]):t._e()],1)},S=[],$=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"m-header"},[n("div",{staticClass:"m-header__wrap"},[n("h1",{staticClass:"m-header__logo"},[n("font-awesome-icon",{staticClass:"m-header__logo__icon",attrs:{icon:"not-equal"}}),t._v("SpotyMix\n    ")],1),n("v-button",{attrs:{icon:"sign-out-alt",text:"Sign out"},on:{onClick:t.logOut}})],1)])}),O=[],P={name:"nav-header",components:{"v-button":b},methods:{logOut:function(){this.$store.commit("logOut"),this.$router.push({name:"home"})}}},M=P,B=(n("8ee7"),Object(c["a"])(M,$,O,!1,null,null,null)),T=B.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{ref:"thisCard",staticClass:"list-card",class:{"list-card--is-active":t.isSelected},on:{click:function(e){return e.preventDefault(),t.toggleActive(e)}}},[n("img",{staticClass:"list-card__image",attrs:{src:t.poster,alt:t.title}}),n("h3",{staticClass:"list-card__title"},[t._v(t._s(t.title))]),n("button",{staticClass:"list-card__preview",on:{click:function(e){return e.stopPropagation(),t.previewClick(e)}}},[t._v("Preview")])])},E=[],L={name:"list-card",data:function(){return{isSelected:!1}},props:{title:String,poster:String,id:String},methods:{toggleActive:function(){this.isSelected=!this.isSelected,this.isSelected?this.$store.commit("addListToMix",this.id):this.$store.commit("removeListToMix",this.id),this.$store.state.mixSelection.length>=2?this.$parent.$refs.mixButton.activeButton():this.$parent.$refs.mixButton.disabledButton()},previewClick:function(){this.$emit("openPreview")}}},D=L,N=(n("ffb6"),Object(c["a"])(D,j,E,!1,null,null,null)),U=N.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-modal"},[n("div",{staticClass:"c-modal__wrap"},[n("span",{staticClass:"c-modal__wrap__icon-close",on:{click:t.closeModal}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),t.title?n("header",{staticClass:"c-modal__header"},[n("h2",{staticClass:"c-modal__header__title"},[t._v(t._s(t.title))])]):t._e(),n("main",{staticClass:"c-modal__content"},[t._t("default",[t._v("No content")])],2)])])},K=[],F={name:"modal",props:["title"],methods:{closeModal:function(){this.$emit("close")}}},I=F,R=(n("30db"),Object(c["a"])(I,A,K,!1,null,null,null)),q=R.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"c-track-item"},[n("div",{staticClass:"c-track-item__poster"},[n("img",{attrs:{src:t.poster,alt:t.title}})]),n("div",{staticClass:"c-track-item__cont"},[n("h3",{staticClass:"c-track-item__cont__artist"},[t._v(t._s(t.artist))]),n("h4",{staticClass:"c-track-item__cont__track"},[t._v("\n      "+t._s(t.title)+"\n      "),n("span",[t._v(t._s(t.album))])])])])},J=[],Y={name:"track-item",props:{data:{type:Object,required:!0}},computed:{poster:function(){return this.data.album.images[0].url},artist:function(){return this.data.artists[0].name},title:function(){return this.data.name},album:function(){return this.data.album.name}}},z=Y,G=(n("a145"),Object(c["a"])(z,H,J,!1,null,null,null)),Q=G.exports,V=(n("96cf"),n("3b8d"));function W(t,e,n){return t.spotify.setAccessToken(n),new Promise(function(n,i){t.spotify.getUserPlaylists(e,{limit:50}).then(function(t){n(t.body.items)},function(t){return i(t)})})}function X(t,e,n){return t.spotify.setAccessToken(n),new Promise(function(n,i){t.spotify.getPlaylist(e).then(function(t){n(t.body.tracks.items)},function(t){return i(t)})})}function Z(t,e,n,i,a){return tt.apply(this,arguments)}function tt(){return tt=Object(V["a"])(regeneratorRuntime.mark(function t(e,n,i,a,s){var o,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.spotify.setAccessToken(s),t.prev=1,t.next=4,e.spotify.createPlaylist(n,i,{public:!1});case 4:return o=t.sent,r=o.body.id,t.next=8,e.spotify.addTracksToPlaylist(r,a);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log("error:",t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])})),tt.apply(this,arguments)}var et=n("2f62"),nt={name:"dashboard",components:{"v-header":T,"list-card":U,"v-button":b,"track-item":Q,Modal:q},data:function(){return{loading:!0,error:null,modal:{name:null,isOpen:!1},prePlaylist:{name:null,tracks:null}}},created:function(){var t=this;0!==this.mixSelection.length&&this.$store.commit("resetPlaylistsSelection"),W(this,this.config.user_id,this.config.access_token).then(function(e){t.loading=!1,t.$store.commit("addPlaylists",e)}).catch(function(e){t.loading=!1,t.error=e.message})},methods:{openModalPreview:function(t,e){var n=this;document.getElementsByTagName("body")[0].classList.add("is-hide"),X(this,e.id,this.config.access_token).then(function(i){n.prePlaylist={name:e.name,tracks:i.tracks.items},n.modal.isOpen=!0,n.modal.name=t})},closeModal:function(){this.modal.isOpen=!1,this.modal.name=null,this.prePlaylist={name:null,tracks:null},document.getElementsByTagName("body")[0].classList.remove("is-hide")},goToMix:function(){this.$router.history.push("mix")}},computed:Object(et["b"])(["mixSelection","config","playlists"])},it=nt,at=(n("b985"),Object(c["a"])(it,w,S,!1,null,null,null)),st=at.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"page-content"},[n("v-header"),t.loading?n("p",{staticClass:"page-content__loading"},[t._v("Loading...")]):t._e(),t.error?n("p",[t._v(t._s(t.error))]):t._e(),this.tracks?n("main",{staticClass:"page-content__main"},[n("div",{staticClass:"mix__header"},[n("h3",{staticClass:"mix__header__title"},[t._v("Your new mixlist")]),n("div",{staticClass:"mix__header__actions"},[n("v-button",{attrs:{text:"Return",icon:"reply",extraClass:"margin-right-10"},on:{onClick:t.goToDashboard}}),n("v-button",{ref:"createButton",attrs:{text:"Create playlist",icon:"volume-up",variant:"green"},on:{onClick:function(){return t.openCreateModal("modal-create")}}})],1)]),this.tracks.length>=100?n("div",{staticClass:"mix__alert"},[t._v("The maximum number of tracks for a playlist is 100, please delete some tracks")]):t._e(),n("ul",{staticClass:"mix__list"},t._l(this.tracks,function(t,e){return n("track-item",{key:e,attrs:{data:t}})}),1),t.modal.isOpen&&"modal-create"===t.modal.name?n("Modal",{attrs:{title:"Set a name for your playlist and create it!"},on:{close:t.closeModal}},[n("div",{staticClass:"mix__modal-create"},[n("form",{staticClass:"mix__modal-create__form"},[n("InputField",{attrs:{placeholder:"Playlist name",extraClass:"margin-right-20"},on:{onKeyUp:function(e){return t.checkCreateButton(e)}}}),n("v-button",{ref:"createButton",attrs:{text:"Mixing!",icon:"sliders-h",variant:"green",disabled:"",type:"submit"},on:{onClick:t.mixing}})],1)])]):t._e()],1):t._e()],1)},rt=[],ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{ref:"field",staticClass:"c-input",class:t.extraClass,attrs:{type:t.inputType,placeholder:t.placeholderText},domProps:{value:t.value},on:{input:function(e){return t.getData(e.target.value)},keyup:function(e){return t.onInputKeyUp(e)}}})},lt=[],ut=new i["a"],dt={name:"inputField",props:{value:String,inputType:String,placeholderText:String,extraClass:String,onKeyUp:Function},methods:{getData:function(t){this.$emit("input",t)},onInputKeyUp:function(t){null!==this.onKeyUp&&this.$emit("onKeyUp",t.target.value)}},updated:function(){var t=this;ut.$on("resetField",function(){t.$refs.field.value=null})}},mt=dt,ft=(n("e11c"),Object(c["a"])(mt,ct,lt,!1,null,null,null)),ht=ft.exports,pt={name:"mix",components:{"v-header":T,"v-button":b,"track-item":Q,Modal:q,InputField:ht},data:function(){return{loading:!0,error:null,modal:{name:null,isOpen:!1},mixName:null}},created:function(){var t=this,e=[];this.mixSelection.forEach(function(n){X(t,n,t.config.access_token).then(function(n){e=e.concat(n.map(function(t){return t.track})),t.$store.commit("addTracks",e),t.loading=!1})}),0!==this.tracks.length&&(this.loading=!1)},updated:function(){this.tracks.length>=100?this.$refs.createButton.disabledButton():this.$refs.createButton.activeButton()},methods:{goToDashboard:function(){this.$router.history.push("dashboard")},openCreateModal:function(t,e){document.getElementsByTagName("body")[0].classList.add("is-hide"),this.modal.isOpen=!0,this.modal.name=t},closeModal:function(){this.modal.isOpen=!1,this.modal.name=null,document.getElementsByTagName("body")[0].classList.remove("is-hide")},checkCreateButton:function(t){this.mixName=t,t.length>0?this.$refs.createButton.activeButton():this.$refs.createButton.disabledButton()},mixing:function(){var t=this,e=this.tracks.map(function(t){return t.uri});Z(this,this.config.user_id,this.mixName,e,this.config.access_token).then(function(){t.closeModal(),t.$router.history.push("dashboard")})}},computed:Object(et["b"])(["mixSelection","config","playlists","tracks"])},_t=pt,vt=(n("63d0"),Object(c["a"])(_t,ot,rt,!1,null,null,null)),gt=vt.exports;i["a"].use(et["a"]);var bt=new et["a"].Store({state:{auth:!1,config:{user_id:null,access_token:null,refresh_token:null},playlists:{},mixSelection:[],tracks:[]},mutations:{addConfig:function(t,e){t.config.access_token=e.access_token,t.config.refresh_token=e.refresh_token,t.config.user_id=e.client_id,t.auth=!0},logOut:function(t){t.auth=!1},addPlaylists:function(t,e){t.playlists=e},addListToMix:function(t,e){t.mixSelection.push(e)},resetPlaylistsSelection:function(t){t.mixSelection=[]},removeListToMix:function(t,e){t.mixSelection=t.mixSelection.filter(function(t){return t!==e})},addTracks:function(t,e){t.tracks=e}}});i["a"].use(d["a"]);var yt=new d["a"]({mode:"history",base:"/spoty-mix-vue/",routes:[{path:"/",name:"home",redirect:{name:"login"}},{path:"/login",name:"login",component:C,beforeEnter:function(t,e,n){bt.state.auth?n({name:"dashboard"}):n()}},{path:"/dashboard",name:"dashboard",component:st,beforeEnter:function(t,e,n){bt.state.auth?n():n({name:"login"})}},{path:"/mix",name:"mix",component:gt,beforeEnter:function(t,e,n){bt.state.auth?n():n({name:"login"})}}]}),xt=yt,kt=n("d9ca"),Ct=n.n(kt),wt=n("a255"),St=n.n(wt),$t=n("ecee"),Ot=n("c074"),Pt=n("ad3d");$t["c"].add(Ot["g"],Ot["d"],Ot["b"],Ot["c"],Ot["a"],Ot["i"],Ot["e"],Ot["f"],Ot["j"],Ot["h"]),i["a"].component("font-awesome-icon",Pt["a"]),i["a"].use(St.a,new Ct.a),i["a"].config.productionTip=!1,new i["a"]({router:xt,store:bt,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(t,e,n){},"63d0":function(t,e,n){"use strict";var i=n("860e"),a=n.n(i);a.a},"860e":function(t,e,n){},"8ee7":function(t,e,n){"use strict";var i=n("b040"),a=n.n(i);a.a},9587:function(t,e,n){},"9cbb":function(t,e,n){},a145:function(t,e,n){"use strict";var i=n("9587"),a=n.n(i);a.a},a4c0:function(t,e,n){},b040:function(t,e,n){},b985:function(t,e,n){"use strict";var i=n("3169"),a=n.n(i);a.a},c76d:function(t,e,n){},e11c:function(t,e,n){"use strict";var i=n("eb69"),a=n.n(i);a.a},eb69:function(t,e,n){},eedc:function(t,e,n){},ef55:function(t,e,n){"use strict";var i=n("c76d"),a=n.n(i);a.a},ffb6:function(t,e,n){"use strict";var i=n("eedc"),a=n.n(i);a.a}});
//# sourceMappingURL=app.89ea1fbd.js.map